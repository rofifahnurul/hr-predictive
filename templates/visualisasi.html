{%include 'header.html'%}
<body>
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1 class="m-0">Visualisasi</h1>
                    </div>
                   
                </div>
                    

            </div>
                <!-- /.row -->
        </div>
            <!-- /.container-fluid -->
      
        <!-- /.content-header -->
        <!-- Main content -->
        <section class="content">
        <!-- Modal -->
        <div id="terbaik" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-info">
                        <h3 class="card-title px-4" >Cluster Terbaik </h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">                 
                            <div class='card-body'>
                                {%for i, row in dfDuplicate.iterrows() %}
                                        {% if loop.first== True %}
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                        Cluster yang memiliki nilai rata - rata terbaik yaitu cluster {{row['cluster']}} dengan nilai rata-rata seperti yang terlihat pada grafik. 
                                    
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                        Pada cluster terbaik ini, nilai rata-rata yang paling tinggi yaitu nilai  {{row['max_col']}} dengan nilai {{row['max']}}. Nilai rata-rata yang paling rendah di cluster terbaik ini adalah nilai {{row['min_col']}} dengan nilai {{row['min']}}. 
                                      
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                        Karyawan yang berada di cluster terbaik ini berasal dari 
                                        {%for i,row in df1_unit.iterrows()%}
                                            {{row['column']}}, 
                                        {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                {% endif %}
                                {% endfor %}
                            </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal-->

        <!-- Modal -->
        <div id="jml" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-info">
                        <h3 class="card-title px-4" >Jumlah Data</h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">                 
                            <div class='card-body'>
                                {%for i, row in countSort.iterrows() %}
                                {% if loop.first == True %}
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Jumlah karyawan yang masuk di tiap cluster jumlahnya berbeda - beda. Cluster dengan jumlah karyawan terbanyak, dimiliki oleh {{ row['cluster']}} 
                                            dengan jumlah karyawan {{ row['count']}}
                                            
                                        </p> 
                                    </div>
                                </div>
                                {% endif %}
                                {% if loop.index == 2 %}
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Cluster dengan jumlah karyawan terbanyak kedua yaitu {{ row['cluster'] }} dengan jumlah karyawan {{ row['count']}}
                                     
                                        </p> 
                                    </div>
                                </div>
                                {% endif %}
                                {% if loop.index == 3 %}
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Cluster dengan jumlah karyawan terbanyak ketiga yaitu {{ row['cluster'] }} dengan jumlah karyawan {{ row['count']}}
                                      </p> 
                                    </div>
                                </div>
                                {% endif %}
                                {% if loop.last == True %}
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Cluster dengan jumlah karyawan palng sedikit yaitu {{ row['cluster'] }} dengan jumlah karyawan {{ row['count']}}
                                        
                                        </p> 
                                    </div>
                                </div>
                                {% endif %}
                                {%endfor%}
                  
                            </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal-->

        <!-- Modal -->
        <div id="terrendah" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-info">
                        <h3 class="card-title px-4" >Cluster Terendah </h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">                 
                            <div class='card-body'>
                                {%for i, row in dfDuplicate.iterrows() %}
                                      {% if loop.last == True %}
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                        
                                        Cluster yang memiliki nilai rata - rata paling rendah yaitu cluster {{row['cluster']}} dengan nilai rata-rata seperti yang terlihat pada grafik.  </p>
                                    </div>
                                </div>
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                        Pada cluster yang paling rendah ini, nilai yang paling tinggi yaitu nilai  {{row['max_col']}} dengan nilai {{row['max']}}. Nilai rata-rata yang paling rendah di cluster terbaik ini adalah nilai {{row['min_col']}} dengan nilai {{row['min']}}.  </p>
                                    </div>
                                </div>
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                        Karyawan yang berada di cluster terbaik ini berasal dari 
                                        {%for i,row in df4_unit.iterrows()%}
                                            {{row['column']}}, 
                                        {%endfor%}
                                        </p>
                                    </div>
                                </div>
                                {% endif %}
                                {%endfor%}
                            </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal-->
        <!-- Modal -->
        <div id="cluster1" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-info">
                        <h3 class="card-title px-4" >Analisis Cluster 1 </h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">                 
                            <div class='card-body'>
                                {%for i, row in dfDuplicate.iterrows() %}
                                        
                                {% if loop.first == True %}
                                    {%for i in count%}
                                                {% if loop.first == True %}
                                                                            
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Terdapat {{ i }} karyawan yang masuk ke cluster 1. Pada cluster ini, rata - rata nilai yang paling tinggi yaitu nilai  {{row['max_col']}} dengan nilai {{row['max']}}. Serta rata-rata nilai yang paling rendah yaitu nilai {{row['min_col']}} dengan nilai {{row['min']}}. 
                                            Karena itu, untuk nilai {{row['min_col']}} perlu diperhatikan dan ditingkatkan lagi
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Karyawan yang berada di cluster 1 ini berasal dari unit bisnis
                                                    {%for i,row in df1_unit.iterrows()%}
                                                        {{row['column']}}, 
                                                    {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Lima departemen terbanyak yang berada di cluster 1 ini berasal dari departemen
                                            {%for i,row in df1_unit.iterrows()%}
                                                {{row['column']}}, 
                                            {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Karyawan yang berada di cluster 1 ini memiliki job level berikut 
                                                    {%for i,row in df1_job.iterrows()%}
                                                        {{row['column']}}, 
                                                    {%endfor%}
                                        </p>
                                    </div>
                                </div>                     {% endif %}
                                            {%endfor%}
                                        {%endif%}
                                       
                                        {%endfor%}

                                    
                            </div>
                    
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal-->

        <!-- Modal -->
        <div id="cluster2" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-info">
                        <h3 class="card-title px-4" >Analisis Cluster 2 </h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">                 
                            <div class='card-body'>
                                {%for i, row in dfDuplicate.iterrows() %}
                                        
                                {% if loop.index == 2 %}
                                    {%for i in count%}
                                                {% if loop.index == 2 %}
                                                                            
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Terdapat {{ i }} karyawan yang masuk ke cluster1. Pada cluster ini, rata - rata nilai yang paling tinggi yaitu nilai  {{row['max_col']}} dengan nilai {{row['max']}}. Serta rata-rata nilai yang paling rendah yaitu nilai {{row['min_col']}} dengan nilai {{row['min']}}. 
                                            Karena itu, untuk nilai {{row['min_col']}} perlu diperhatikan dan ditingkatkan lagi
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Karyawan yang berada di cluster 1 ini berasal dari unit bisnis
                                                    {%for i,row in df2_unit.iterrows()%}
                                                        {{row['column']}}, 
                                                    {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Lima departemen terbanyak yang berada di cluster 1 ini berasal dari departemen
                                            {%for i,row in df2_unit.iterrows()%}
                                                {{row['column']}}, 
                                            {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Karyawan yang berada di cluster 1 ini memiliki job level berikut 
                                                    {%for i,row in df2_job.iterrows()%}
                                                        {{row['column']}}, 
                                                    {%endfor%}
                                        </p>
                                    </div>
                                </div>          {% endif %}
                                            {%endfor%}
                                        {%endif%}
                                       
                                        {%endfor%}
                                    
                            </div>
                    
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal-->

        <!-- Modal -->
        <div id="cluster3" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-info">
                        <h3 class="card-title px-4" >Analisis Cluster 3 </h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">                 
                            <div class='card-body'>
                                {%for i, row in dfDuplicate.iterrows() %}
                                        
                                {% if loop.index == 3 %}
                                    {%for i in count%}
                                                {% if loop.index == 3 %}
                                                                            
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Terdapat {{ i }} karyawan yang masuk ke cluster 3. Pada cluster ini, rata - rata nilai yang paling tinggi yaitu nilai  {{row['max_col']}} dengan nilai {{row['max']}}. Serta rata-rata nilai yang paling rendah yaitu nilai {{row['min_col']}} dengan nilai {{row['min']}}. 
                                            Karena itu, untuk nilai {{row['min_col']}} perlu diperhatikan dan ditingkatkan lagi
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Karyawan yang berada di cluster 3 ini berasal dari unit bisnis
                                                    {%for i,row in df3_unit.iterrows()%}
                                                        {{row['column']}}, 
                                                    {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Lima departemen terbanyak yang berada di cluster 3 ini berasal dari departemen
                                            {%for i,row in df3_unit.iterrows()%}
                                                {{row['column']}}, 
                                            {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Karyawan yang berada di cluster 3 ini memiliki job level berikut 
                                                    {%for i,row in df3_job.iterrows()%}
                                                        {{row['column']}}, 
                                                    {%endfor%}
                                        </p>
                                    </div>
                                </div>                 {% endif %}
                                            {%endfor%}
                                        {%endif%}
                                       
                                        {%endfor%}     
                            </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal-->

        <!-- Modal -->
        <div id="cluster4" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-info">
                        <h3 class="card-title px-4" >Analisis Cluster 4</h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">                 
                            <div class='card-body'>
                                {%for i, row in dfDuplicate.iterrows() %}
                                        
                                {% if loop.index == 4%}
                                    {%for i in count%}
                                                {% if loop.index == 4 %}
                                                                            
                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Terdapat {{ i }} karyawan yang masuk ke cluster 4. Pada cluster ini, rata - rata nilai yang paling tinggi yaitu nilai  {{row['max_col']}} dengan nilai {{row['max']}}. Serta rata-rata nilai yang paling rendah yaitu nilai {{row['min_col']}} dengan nilai {{row['min']}}. 
                                            Karena itu, untuk nilai {{row['min_col']}} perlu diperhatikan dan ditingkatkan lagi
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Karyawan yang berada di cluster 4 ini berasal dari unit bisnis
                                                    {%for i,row in df4_unit.iterrows()%}
                                                        {{row['column']}}, 
                                                    {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Lima departemen terbanyak yang berada di cluster 4 ini berasal dari departemen
                                            {%for i,row in df4_dep.iterrows()%}
                                                {{row['column']}}, 
                                            {%endfor%}
                                        </p>
                                    </div>
                                </div>

                                <div class="card text-white bg-info mb-3" >                
                                    <div class="card-body">
                                        <p  class="card-text px-4 py-2">
                                            Karyawan yang berada di cluster 4 ini memiliki job level berikut 
                                                    {%for i,row in df4_job.iterrows()%}
                                                        {{row['column']}}, 
                                                    {%endfor%}
                                        </p>
                                    </div>
                                </div> 
                                                {% endif %}
                                            {%endfor%}
                                        {%endif%}
                                       
                                        {%endfor%}
                            </div>
                    
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal-->
        <div class="btn-group">
            <button type="button" class="btn btn-outline-info mb-3 pull-right" data-toggle="modal" data-target="#jml">Analisis Jumlah Data</button>
        </div>
            <div class="btn-group">
                <button type="button" class="btn btn-outline-info mb-3 pull-right" data-toggle="modal" data-target="#terbaik">Analisis Cluster Terbaik</button>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-outline-info mb-3 pull-right" data-toggle="modal" data-target="#terrendah">Analisis Cluster Terrendah</button>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-outline-info mb-3 pull-right" data-toggle="modal" data-target="#cluster1">Analisis Cluster 1</button>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-outline-info mb-3 pull-right" data-toggle="modal" data-target="#cluster2">Analisis Cluster 2</button>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-outline-info mb-3 pull-right" data-toggle="modal" data-target="#cluster3">Analisis Cluster 3</button>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-outline-info mb-3 pull-right" data-toggle="modal" data-target="#cluster4">Analisis Cluster 4</button>
            </div>
            <div class="card">
                <div id='mean'>
                    <!-- Plotly chart will be drawn inside this DIV -->
                </div>
            </div>

            <div class="card">
                <div id='count'>
                    <!-- Plotly chart will be drawn inside this DIV -->
                </div>
            </div>

            <div class="card">
                <div id='jobLevel'>
                    <!-- Plotly chart will be drawn inside this DIV -->
                </div>
            </div>
            <div class="card">
                <div id='businessUnit'>
                    <!-- Plotly chart will be drawn inside this DIV -->
                </div>
            </div>
            <div class="card">
                <div id='top5dep'>
                    <!-- Plotly chart will be drawn inside this DIV -->
                </div>
            </div>
            
        </section>
        <!-- /.content -->
    </div>
</body>
<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
<script type='text/javascript'>
   
    var countGraphs = {{countGraphJSON| safe}};
    Plotly.plot('count', countGraphs,{});

    var jobGraphs = {{jobGraphJSON| safe}};
    Plotly.plot('jobLevel', jobGraphs,{});

    var unitGraphs = {{unitGraphJSON| safe}};
    Plotly.plot('businessUnit', unitGraphs,{});

    var depGraphs = {{depGraphJSON| safe}};
    Plotly.plot('top5dep', depGraphs,{});

    var meanGraphs = {{meanGraphJSON| safe}};
    Plotly.plot('mean', meanGraphs,{});

</script>

<!-- /.content-wrapper -->
{% include 'footer.html'%}